
{% block body %}
<!DOCTYPE html>
<html lang="en">
<head>
  
  
  <link rel="icon" type="image/x-icon" href="{{ asset('Images/Ball.ico') }}">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MatchMate</title>
  
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ asset('styles2.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11">
</head>





<body>



        <nav class="navbar">
            <div class="navbar-logo">
            <img src="{{ asset('Images/logo.png') }}" alt="Logo">
            </div>
            <ul class="navbar-items">
            <li ><a href="{{ path('app_home') }}">Home</a></li>
            <li><a href="#">Reservation</a></li>
            <li><a href="#">Events</a></li>
            <li><a href="#">Shop</a></li>
            <li><a href="#">Claim</a></li>
            </ul>
            <div class="navbar-icons">
                <img src="{{ asset('Images/panier.png') }}" alt="panier">
                <img src="{{ asset('Images/utilisateur (1).png') }}" alt="utilisateur">
            
            </div>
        </nav>

        <div class="black-div">
            <div class="horizontal-div">
              <div class=" text-overlay">
                <span>Football </span>
                <span>Discount 50%</span>
                <button class="btn1 btn-success">Get Discount</button>
              </div>
              <div class="vertical-div">
                <img src="{{ asset('Images/football.png') }}" alt="Image">
              </div>
            </div>
        </div>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><brr><br><br><br><br><br><br><br>

          

        

    

          <div class="container">
    <h1 class="my-4 text-center">Welcome to our Shop</h1>
    <div class="row">
        {% for product in products %}
        <div class="col-md-4 mb-4">
            <div class="card" id="results">
                {% if product.image %}
                <img src="{{ asset('uploads/images/' ~ product.image) }}" class="card-img-top" alt="Image du sport {{ product.name }}">
                {% else %}
                <div class="card-img-top" style="height: 200px; background-color: #ccc;"></div>
                {% endif %}
                <div class="card-body">
                    <h5 class="card-title text-center">{{ product.name }}</h5>
                    <p class="card-text text-center">
                    <strong>ID:</strong> {{ product.id }}<br>
                        <strong>Reference:</strong> {{ product.reference }}<br>
                        <strong>Price:</strong> ${{ product.price }}
                    </p>
                    <div class="text-center">
                        

                              <button type="submit" class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}>
                                  <i class="fas fa-shopping-cart"></i> Add to cart
                              </button>
                         

                        <button class="btn btn-danger ml-2"><i class="fas fa-heart"></i> Like</button>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="col">
            <p>Aucun enregistrement trouv√©</p>
        </div>
        {% endfor %}
    </div>
</div>

<div class="pagination-container" style="text-align: center; position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%);">
    {{ knp_pagination_render(products) }}
</div>


                        

        
    
        

        <footer class="footer">
            <div class="footer-section">
                <div class="logo-and-paragraph">
                    <img src="images/logo.png" alt="Footer Logo">
                    <p>Copyrights MiCasa Homes and Properties</p>
                    <p>All rights reserved</p>
                </div>
            </div>
            <div class="footer-section">
                <ul class="footer-list">
                  <h3>Company</h3>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Contact Us</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <ul class="footer-list">
                  <h3>Support</h3>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Shipping Information</a></li>
                    <li><a href="#">Returns & Refunds</a></li>
                </ul>
            </div>
        </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#search').keyup(function() {
            var query = $(this).val();
            $.ajax({
                url: "{{ path('app_product_search') }}",
                type: "POST",
                data: {query: query},
                success: function(data) {
                    $('#results').html(data);
                    $('#results').css('width', '100%');
                    $('#results').css('position', 'static');
                }
            });
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
    console.log("Script loaded"); // Debugging statement

    const addToCartButtons = document.querySelectorAll(".add-to-cart-btn");
    addToCartButtons.forEach(button => {
        button.addEventListener("click", function() {
            console.log("Add to cart button clicked"); // Debugging statement

            const productId = button.getAttribute("data-product-id");
            console.log("Product ID:", productId); // Debugging statement
            addToCart(productId);
        });
    });

    function addToCart(productId) {
        console.log("Adding product to cart:", productId); // Debugging statement

        // Make an AJAX request to your server
        const xhr = new XMLHttpRequest();
        xhr.open("POST", "/add_to_cart", true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4) {
                console.log("AJAX request completed"); // Debugging statement
                if (xhr.status === 200) {
                    console.log("Server response:", xhr.responseText); // Debugging statement
                    // Handle the response from the server if needed
                    const response = JSON.parse(xhr.responseText);
                    console.log(response);
                } else {
                    console.error("Error:", xhr.status); // Debugging statement
                }
            }
        };
        const data = JSON.stringify({ productId: productId });
        xhr.send(data);
    }
});

</script>
{# Pagination #}
<script src="{{ asset('https://code.jquery.com/jquery-3.5.1.min.js') }}"></script>
<script>
    $(document).ready(function() {
    // Set up click event listener for pagination links
    $('#pagination-container').on('click', 'a', function(event) {
    event.preventDefault();

    // Get the URL of the next page of results from the pagination link
    var url = $(this).attr('href');
    // Send an AJAX request to load the next page of results
    $.ajax({
    url: url,
    type: 'GET',
    success: function(response) {
    console.log(response); // Log the response to the console
    // Replace the current content with the new content from the AJAX response
    $('#tabv').html($(response).find('#tabv').html());
    $('#pagination-container').html($(response).find('#pagination-container').html());
    },
    error: function(jqXHR, textStatus, errorThrown) {
    console.log('AJAX error: ' + textStatus + ' - ' + errorThrown);
    }
    });
    });
    });
</script>
    {# Pagination #}


       









  </body>
  </head>
  </html>
  {% endblock %}